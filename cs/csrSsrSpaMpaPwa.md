### **CSR vs SSR**

- `렌더링방식`이란 결국 화면에 그려지는 것은 HTML인데 이것을 누가 하느냐 주최자에 따라서 `CSR(Client Side Rendering)`과 `SSR(Server Side Rendering)`로 나뉘게 됩니다.

```js
index.html

<html>
  <head>
    <title>Title</title>
  </head>
  <body>
    <div id="app"></div>
  </body>
</html>
```

```js
최종적으로 유저가 화면에서 보는 html 의 예시

<html>
  <head>
    <title>Title</title>
  </head>
  <body>
    <h1>Hello World!</h1>
    <p>이것이 최종적으로 화면에서 보고 있는 내용</p>
  </body>
</html>
```

- `body` 안에 `div` 하나만 있다. 실제로 이 뼈대 하나만 다운을 한다. 우리가 화면을 볼때는 `div`안에 다양한 `tag`들이 존재하는데 이를 html파일과 함께 다운받은 js 파일의 로직을 통해서 동적으로 태그나 스타일들을 DOM에 더하여 그리기 때문

---

#### **CSR(Client Side Rendering)**

- 브라우저(Client)에서 동적으로 DOM을 그리게 되면 `CSR`

  <img src="https://tech.weperson.com/img/wedev/csr.png" alt="csr">

- JS 프레임워크(라이브러리)를 쓴다고 가정해보자
- 각각의 문법에 맞게 코딩을 하고 빌드를 하면 최종적으로는 브라우저가 이해 할 수 있는 `HTML`, `CSS`, `JS`형태의 파일이 아웃풋으로 나온다.
- 이때 웹서버에 올렸을때, 웹서버는 단순히 올려놓은 파일을 전달해주는 전달자 역할만 한다.

> 브라우저는 웹서버로부터 다운받은 파일을 그냥 실행 할 뿐이고 JS파일을 실행하면서 DOM에 내용을 추가하면서 그림

#### **CSR특징**

- JS를 읽어서 무엇을 그려야 할지를 판단하고 그리는 작업을 하는 동안 딜레이가 생김
- 반면에 이후 작업에 있어서는 서버의 의존도가 없이 클라이언트 혼자 그릴 수 있으므로 빠른 화면 전환이나 인터랙션(interaction)이 가능
- `index.html` 에 단순히 뼈대만 있기 때문에 검색 엔진의 봇들이 크롤링(crawling)할 때 아무 내용이 없어서 SEO에 취약

#### **SSR(Server Side Rendering)**

- 이미 다 그려진 DOM을 받게 되면 `SSR`
- HTML, CSS, JS를 직접 올리는 것이 아니라 해당 파일들을 만들어 낼 수 있는 로직을 올리고 서버에서 해당 로직을 실행해서 최종적으로 `HTML`, `CSS`, `JS`를 만들어 브라우저에 전달
- 만들어진 DOM에는 이미 다 구성되어 있음.
- <img src="https://tech.weperson.com/img/wedev/ssr.png" alt="ssr">

#### **SSR특징**

- DOM 이 다 구성된 파일을 브라우저가 받기 때문에 바로 그릴수가 있어서 초기 구동 속도가 빠름
- DOM에 이미 내용이 다 차있기 때문에 검색 엔진들이 정보를 수집할때 정확한 정보를 가져갈 수 있어서 SEO에 좋다.

---

#### **CSR이 SSR보다 반드시 초기 구동이 늦은것일까?**

- 정적인 컨텐츠가 많은 경우는 유효하지만 동적인 컨텐츠가 많다고 하면 결국 캐싱을 활용도가 떨어지고 서버에 부담은 그대로 갑니다.

#### **CSR은 SEO에 취약하다?**

- 취약한것은 사실이지만, 내 서비스 전체가 SEO가 필요한가를 고민하는게 우선!
- 공개되야 하는 퍼블릭 데이터만 SEO가 필요할 뿐이지 모든 데이터가 SEO가 필요하지 않습니다.

#### **비용적측면에서**

- `CSR` 로 구성 할 경우 S3 같은 단순 스토리지에 올리고 전면에 Cloud Front로 구성하여 캐싱과 레이턴시를 줄이고 트레픽 비용만 지불
- `SSR` 의 경우 매번 서버에서 로직을 실행하는 비용을 추가

#### **무엇을 선택해야 할까?**

- 가장 중요한것은 내 프로젝트나 서비스 구성에 맞게!!
- 고객의 데이터를 보호해야 하는 경우나 비용이 민감할 경우 `CSR`
- 정적 콘텐츠와 퍼블릭 데이터가 많은 경우에는 `SSR`을 선택
- 두가지를 섞어서도 가능

---

### **SPA vs MPA**

- 기술적으로는 `SPA` 는 어떤 페이지를 접속하더라도 `HTML`, `CSS`, `JS` 동일한 파일 하나만 접속한 페이지에 맞게 화면을 구성하고 `MPA` 는 페이지 별로 해당 페이지에 맞는 `HTML`, `CSS`, `JS` 파일을 받아서 화면을 구성

- 고전적인 방식이 MPA이며 아직도 많이 사용되어지고 있고, 최근 들어 JS 프레임워크들은 SPA를 기본으로 하고 있습니다.

- `SPA`의 트릭은 하나의 페이지에서 JS를 통하여 보고 있는 DOM의 내용을 모두 제거하고 다른 컨텐츠로 DOM을 채운 다음에 브라우저상에 URL을 강제로 변경, 실제로 방문한적도 없는 URL을 방문하여 해당 페이지를 보고 있는 느낌을 주는 것.

- 일반적으로 `CSR = SPA` , `SSR = MPA` 이라고 공식처럼 얘기가 되는데 `React`, `Vue`, `Angular` 같은 JS 기반 프레임워크(라이브러리)를 쓰면 기본적으로 `HTML`, `CSS`, `JS` 파일이 각 하나씩 나오기 때문에 자연스레 SPA가 되면서 CSR이 되는 것이고, 이를 SSR로 구현하면 페이지 별로 렌더링을 따로 하기 때문에 MPA가 되는 것

#### **화면이 한번 깜박인다**

- 둘의 차이에서 '화면이 깜빡인다'에 중점.
- MPA는 페이지를 새로 로드하기 때문에 화면 깜빡임 현상을 막을 수가 없습니다.
- SPA는 이미 로드한 페이지에서 DOM의 내용만 교체하기 때문에 이 깜빡임이 보이지 않습니다.

#### **모바일에서**

- 모바일의 경우 적은 트래픽과 빠른 인터렉션이 중요하기 때문에 SPA와 잘 맞는다.

---

### **PWA(Progressive Web App)**

- 웹과 네이트 앱의 기능을 모두 갖춘 형태
- 웹처럼 URL로 접근하여 애플 스토어나 구글 스토어를 거치지 않고 모바일 디바이스 홈 화면에 바로 설치하여 사용이 가능한것을 떠올리자.

---

### 마무리

- 서비스의 특성상 고객 정보를 보호해야 하고 빠른 인터렉션이 필요하여 기본적으로 웹은 `SPA/CSR`을 사용하나, 정적인 홈페이지나 퍼블릭 데이터로 `SEO가 필요한 부분에서 SSR`를 이용하고 모바일은 `SPA/PWA` 형태를 패키징해서 사용하자.
